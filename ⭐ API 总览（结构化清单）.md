下面是严格结构化整理后的一份 **《API 接口清单（教师端 + AI 服务）》**，按照模块划分、RESTful 风格、清晰层次结构，适合作为系统设计文档的一部分。

> 说明
>
> - 全部接口前缀默认：`/api/v1`
> - 全部需要登录的接口采用 **JWT** 鉴权（除登录注册以外）
> - AI 功能单独划分 `/ai` 模块
> - 只提供接口清单，不含参数细节（你需要的话我可以补）

------

# ⭐ **API 总览（结构化清单）**

```
├── Auth 认证模块
├── Teacher 教师信息模块
├── Course & Lesson 教案/课程模块
├── Resource 教学资源模块
├── Question 题库模块
├── Log 行为日志模块
└── AI 智能服务模块
```

------

# 1. **Auth 认证模块**

## 1.1 注册 / 登录

| 方法 | 路径             | 说明                                |
| ---- | ---------------- | ----------------------------------- |
| POST | `/auth/register` | 教师注册（可选功能）                |
| POST | `/auth/login`    | 登录，返回 JWT Token                |
| POST | `/auth/logout`   | 退出登录（前端清 Token 即可，可选） |
| POST | `/auth/refresh`  | 刷新 Token（可选）                  |

------

# 2. **Teacher 教师信息模块**

| 方法 | 路径                | 说明             |
| ---- | ------------------- | ---------------- |
| GET  | `/teacher/profile`  | 获取教师个人信息 |
| PUT  | `/teacher/profile`  | 修改教师信息     |
| PUT  | `/teacher/password` | 修改密码         |
| POST | `/teacher/avatar`   | 上传头像         |

------

# 3. **Course / Lesson 教案模块**

```
课程（Course）
└─ 教案（LessonPlan）
```

------

## 3.1 科目 / 课程管理（基础信息）

| 方法   | 路径               | 说明                                  |
| ------ | ------------------ | ------------------------------------- |
| GET    | `/course/subjects` | 获取系统支持的科目列表（语文/数学等） |
| GET    | `/course/list`     | 获取教师的课程列表                    |
| POST   | `/course`          | 新建课程（科目 + 年级 + 单元等）      |
| GET    | `/course/{id}`     | 查看课程详情                          |
| PUT    | `/course/{id}`     | 修改课程信息                          |
| DELETE | `/course/{id}`     | 删除课程                              |

------

## 3.2 教案管理（Lesson）

### 3.2.1 教案 CRUD 基本操作

| 方法   | 路径           | 说明                                  |
| ------ | -------------- | ------------------------------------- |
| GET    | `/lesson/list` | 获取教师的所有教案（可筛选科目/年级） |
| POST   | `/lesson`      | 新建空白教案                          |
| GET    | `/lesson/{id}` | 获取教案详情（Markdown+JSON）         |
| PUT    | `/lesson/{id}` | 编辑教案（整体更新）                  |
| PATCH  | `/lesson/{id}` | 局部更新教案（如修改标题/结构）       |
| DELETE | `/lesson/{id}` | 删除教案                              |

------

### 3.2.2 教案版本管理

| 方法 | 路径                                        | 说明                 |
| ---- | ------------------------------------------- | -------------------- |
| GET  | `/lesson/{id}/versions`                     | 获取某教案的所有版本 |
| GET  | `/lesson/{id}/version/{version_id}`         | 查看单个版本详情     |
| POST | `/lesson/{id}/version`                      | 保存当前内容为新版本 |
| POST | `/lesson/{id}/version/{version_id}/restore` | 回滚版本             |

------

### 3.2.3 教案文件上传

| 方法 | 路径                  | 说明                             |
| ---- | --------------------- | -------------------------------- |
| POST | `/lesson/{id}/upload` | 上传教师自己的 PDF/Word 教案文件 |

------

### 3.2.4 教案导出接口

| 方法 | 路径                       | 说明          |
| ---- | -------------------------- | ------------- |
| GET  | `/lesson/{id}/export/md`   | 导出 Markdown |
| GET  | `/lesson/{id}/export/pdf`  | 导出 PDF      |
| GET  | `/lesson/{id}/export/docx` | 导出 Word     |

------

# 4. **Resource 教学资源（图片/插图）模块**

------

## 4.1 资源上传与管理

| 方法   | 路径               | 说明                        |
| ------ | ------------------ | --------------------------- |
| POST   | `/resource/upload` | 上传本地图片（教师素材）    |
| GET    | `/resource/list`   | 获取资源库内容（分页/分类） |
| DELETE | `/resource/{id}`   | 删除资源                    |
| PUT    | `/resource/{id}`   | 修改资源信息（名称/标签）   |

------

## 4.2 资源标签

| 方法   | 路径                   | 说明         |
| ------ | ---------------------- | ------------ |
| GET    | `/resource/tags`       | 获取全部标签 |
| POST   | `/resource/tags`       | 新增标签     |
| DELETE | `/resource/tags/{tag}` | 删除标签     |

------

# 5. **Question 题库模块**

------

## 5.1 题目 CRUD

| 方法   | 路径             | 说明                 |
| ------ | ---------------- | -------------------- |
| POST   | `/question`      | 新增题目（手动录入） |
| GET    | `/question/{id}` | 题目详情             |
| PUT    | `/question/{id}` | 更新题目             |
| DELETE | `/question/{id}` | 删除题目             |

------

## 5.2 题库查询 / 标签管理

| 方法   | 路径                   | 说明                                   |
| ------ | ---------------------- | -------------------------------------- |
| GET    | `/question/list`       | 查询题库（可按科目、知识点、难度筛选） |
| GET    | `/question/tags`       | 获取标签列表                           |
| POST   | `/question/tags`       | 创建标签                               |
| DELETE | `/question/tags/{tag}` | 删除标签                               |

------

# 6. **Log 行为日志模块**

| 方法 | 路径        | 说明                     |
| ---- | ----------- | ------------------------ |
| GET  | `/log/list` | 获取教师操作日志（分页） |
| GET  | `/log/{id}` | 查看日志详情             |

用于记录：

- 教案生成
- 题目生成
- 图片生成
- 登录日志
- 导出操作
   （便于课设展示系统可解释性）

------

# 7. **AI 功能模块（AI 核心服务）**

AI 功能全部分组于 `/ai` 下，方便限流和鉴权。

------

## 7.1 AI 教案生成

| 方法 | 路径                  | 说明                      |
| ---- | --------------------- | ------------------------- |
| POST | `/ai/lesson/generate` | 根据课题/模板生成完整教案 |
| POST | `/ai/lesson/expand`   | 扩展/补全教案段落         |
| POST | `/ai/lesson/optimize` | 优化教案风格/逻辑         |
| POST | `/ai/lesson/summary`  | 教案摘要生成              |

------

## 7.2 AI 教案解析（文件解析）

| 方法 | 路径               | 说明                             |
| ---- | ------------------ | -------------------------------- |
| POST | `/ai/lesson/parse` | 上传 PDF/DOCX → 解析成 JSON 结构 |

------

## 7.3 AI 题目生成

| 方法 | 路径                    | 说明                         |
| ---- | ----------------------- | ---------------------------- |
| POST | `/ai/question/generate` | 根据知识点批量生成题目       |
| POST | `/ai/question/analysis` | 对题目生成解析（可分开提供） |

------

## 7.4 AI 配图 / 插画生成

| 方法 | 路径                 | 说明             |
| ---- | -------------------- | ---------------- |
| POST | `/ai/image/generate` | 根据描述生成插图 |
| POST | `/ai/board/generate` | 生成板书风格图片 |

------

## 7.5 AI PPT 生成

| 方法 | 路径               | 说明                                 |
| ---- | ------------------ | ------------------------------------ |
| POST | `/ai/ppt/generate` | 根据教案自动生成 PPT（返回下载地址） |

------

## 7.6 AI 学情分析（可选）

| 方法 | 路径                    | 说明                       |
| ---- | ----------------------- | -------------------------- |
| POST | `/ai/analysis/mistakes` | 根据错误题生成学情分析报告 |
| POST | `/ai/analysis/class`    | 班级整体画像（可模拟数据） |

------

# 8. 可选：系统配置与工具类接口

| 方法 | 路径             | 说明                                 |
| ---- | ---------------- | ------------------------------------ |
| GET  | `/config/limits` | 获取系统限制（最大文件、生成限额等） |
| GET  | `/status/ping`   | 健康检查                             |

------

# 📌 如你需要，我还可以继续补充：

- ✔ **每个 API 的参数 Schema（Request/Response）**
- ✔ **整个系统的 API 文档（OpenAPI/Swagger）**
- ✔ **数据库表结构（ER 图）自动适配本 API 清单**
- ✔ **FastAPI 的目录结构（按模块拆分）**

你想继续生成哪部分？