{
  "openapi": "3.1.0",
  "info": {
    "title": "AI辅助教师备课系统",
    "description": "基于FastAPI的AI辅助教师备课系统API",
    "version": "1.0.0"
  },
  "paths": {
    "/api/v1/auth/register": {
      "post": {
        "tags": [
          "Auth 认证模块"
        ],
        "summary": "Register",
        "description": "教师注册",
        "operationId": "register_api_v1_auth_register_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UserCreate"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/auth/login": {
      "post": {
        "tags": [
          "Auth 认证模块"
        ],
        "summary": "Login",
        "description": "登录，返回JWT Token",
        "operationId": "login_api_v1_auth_login_post",
        "requestBody": {
          "content": {
            "application/x-www-form-urlencoded": {
              "schema": {
                "$ref": "#/components/schemas/Body_login_api_v1_auth_login_post"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {

                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/auth/logout": {
      "post": {
        "tags": [
          "Auth 认证模块"
        ],
        "summary": "Logout",
        "description": "退出登录",
        "operationId": "logout_api_v1_auth_logout_post",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {

                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/api/v1/auth/refresh": {
      "post": {
        "tags": [
          "Auth 认证模块"
        ],
        "summary": "Refresh Token",
        "description": "刷新Token",
        "operationId": "refresh_token_api_v1_auth_refresh_post",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {

                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/api/v1/auth/profile": {
      "get": {
        "tags": [
          "Auth 认证模块"
        ],
        "summary": "Get Profile",
        "description": "获取当前用户完整信息",
        "operationId": "get_profile_api_v1_auth_profile_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserProfileResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      },
      "put": {
        "tags": [
          "Auth 认证模块"
        ],
        "summary": "Update Profile",
        "description": "更新用户信息",
        "operationId": "update_profile_api_v1_auth_profile_put",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UserProfileUpdate"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserProfileResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/api/v1/auth/password": {
      "put": {
        "tags": [
          "Auth 认证模块"
        ],
        "summary": "Update Password",
        "description": "修改密码",
        "operationId": "update_password_api_v1_auth_password_put",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/PasswordUpdate"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {

                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/api/v1/auth/avatar": {
      "post": {
        "tags": [
          "Auth 认证模块"
        ],
        "summary": "Upload Avatar",
        "description": "上传头像到阿里云 OSS",
        "operationId": "upload_avatar_api_v1_auth_avatar_post",
        "requestBody": {
          "content": {
            "multipart/form-data": {
              "schema": {
                "$ref": "#/components/schemas/Body_upload_avatar_api_v1_auth_avatar_post"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AvatarResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/api/v1/lesson/list": {
      "get": {
        "tags": [
          "Lesson 教案模块"
        ],
        "summary": "Get Lesson List",
        "description": "获取教师的所有教案列表\n\n支持分页和筛选",
        "operationId": "get_lesson_list_api_v1_lesson_list_get",
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 1,
              "default": 1,
              "title": "Page"
            }
          },
          {
            "name": "page_size",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "default": 20,
              "title": "Page Size"
            }
          },
          {
            "name": "subject",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Subject"
            }
          },
          {
            "name": "grade",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Grade"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {

                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/lesson": {
      "post": {
        "tags": [
          "Lesson 教案模块"
        ],
        "summary": "Create Lesson",
        "description": "新建教案\n\n可以创建空白教案或带初始内容的教案",
        "operationId": "create_lesson_api_v1_lesson_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/LessonCreateIn"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {

                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/api/v1/lesson/{id}": {
      "get": {
        "tags": [
          "Lesson 教案模块"
        ],
        "summary": "Get Lesson Detail",
        "description": "获取教案详情",
        "operationId": "get_lesson_detail_api_v1_lesson__id__get",
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {

                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": [
          "Lesson 教案模块"
        ],
        "summary": "Update Lesson",
        "description": "编辑教案（整体更新）",
        "operationId": "update_lesson_api_v1_lesson__id__put",
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/LessonUpdateIn"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {

                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "patch": {
        "tags": [
          "Lesson 教案模块"
        ],
        "summary": "Patch Lesson",
        "description": "局部更新教案",
        "operationId": "patch_lesson_api_v1_lesson__id__patch",
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/LessonPatchIn"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {

                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "Lesson 教案模块"
        ],
        "summary": "Delete Lesson",
        "description": "删除教案",
        "operationId": "delete_lesson_api_v1_lesson__id__delete",
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {

                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/lesson/{id}/section": {
      "patch": {
        "tags": [
          "Lesson 教案模块"
        ],
        "summary": "Update Lesson Section",
        "description": "更新教案的单个章节内容\n\n支持嵌套 key，如 teaching_flow.main",
        "operationId": "update_lesson_section_api_v1_lesson__id__section_patch",
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/LessonSectionUpdateIn"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {

                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/ai/lesson/clarify/chat": {
      "post": {
        "tags": [
          "AI 智能服务模块"
        ],
        "summary": "Lesson Clarify Chat Api",
        "description": "教案澄清对话\n\n多轮对话收集教案生成所需信息",
        "operationId": "lesson_clarify_chat_api_api_v1_ai_lesson_clarify_chat_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/LessonClarifyChatIn"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {

                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/api/v1/ai/lesson/clarify/update": {
      "post": {
        "tags": [
          "AI 智能服务模块"
        ],
        "summary": "Lesson Clarify Update Api",
        "description": "直接更新澄清数据\n\n用于前端表单直接提交场景",
        "operationId": "lesson_clarify_update_api_api_v1_ai_lesson_clarify_update_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/LessonClarifyUpdateIn"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {

                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/api/v1/ai/lesson/clarify/confirm": {
      "post": {
        "tags": [
          "AI 智能服务模块"
        ],
        "summary": "Lesson Clarify Confirm Api",
        "description": "确认澄清完成\n\n将会话状态标记为可生成",
        "operationId": "lesson_clarify_confirm_api_api_v1_ai_lesson_clarify_confirm_post",
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "parameters": [
          {
            "name": "session_id",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Session Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {

                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/ai/lesson/clarify/state": {
      "get": {
        "tags": [
          "AI 智能服务模块"
        ],
        "summary": "Lesson Clarify State Api",
        "description": "获取澄清会话状态",
        "operationId": "lesson_clarify_state_api_api_v1_ai_lesson_clarify_state_get",
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "parameters": [
          {
            "name": "session_id",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Session Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {

                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/ai/lesson/clarify/session": {
      "delete": {
        "tags": [
          "AI 智能服务模块"
        ],
        "summary": "Lesson Clarify Reset Api",
        "description": "重置澄清会话",
        "operationId": "lesson_clarify_reset_api_api_v1_ai_lesson_clarify_session_delete",
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "parameters": [
          {
            "name": "session_id",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Session Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {

                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/ai/lesson/generate": {
      "post": {
        "tags": [
          "AI 智能服务模块"
        ],
        "summary": "Lesson Generate Api",
        "description": "触发教案异步生成\n\n返回 task_id，前端通过轮询 /lesson/generate/status 查看进度",
        "operationId": "lesson_generate_api_api_v1_ai_lesson_generate_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/LessonGenerateIn"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {

                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/api/v1/ai/lesson/generate/status": {
      "get": {
        "tags": [
          "AI 智能服务模块"
        ],
        "summary": "Lesson Generate Status Api",
        "description": "查询教案生成任务状态\n\n返回当前进度和已生成的内容（partial_lesson）",
        "operationId": "lesson_generate_status_api_api_v1_ai_lesson_generate_status_get",
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "parameters": [
          {
            "name": "task_id",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Task Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {

                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/ai/lesson/templates": {
      "get": {
        "tags": [
          "AI 智能服务模块"
        ],
        "summary": "Lesson Templates Api",
        "description": "获取可用的教案模板列表",
        "operationId": "lesson_templates_api_api_v1_ai_lesson_templates_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {

                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/api/v1/ai/exercise/clarify/chat": {
      "post": {
        "tags": [
          "AI 智能服务模块"
        ],
        "summary": "Exercise Clarify Chat",
        "operationId": "exercise_clarify_chat_api_v1_ai_exercise_clarify_chat_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ClarifyChatIn"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {

                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/ai/exercise/clarify/confirm": {
      "post": {
        "tags": [
          "AI 智能服务模块"
        ],
        "summary": "Exercise Clarify Confirm",
        "operationId": "exercise_clarify_confirm_api_v1_ai_exercise_clarify_confirm_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ClarifyConfirmIn"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {

                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/ai/exercise/generate": {
      "post": {
        "tags": [
          "AI 智能服务模块"
        ],
        "summary": "Exercise Generate",
        "description": "作业生成（带数据库保存）",
        "operationId": "exercise_generate_api_v1_ai_exercise_generate_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/GenerateIn"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {

                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/api/v1/ai/exercise/list": {
      "get": {
        "tags": [
          "AI 智能服务模块"
        ],
        "summary": "Get Exercises",
        "description": "查询作业列表\n\n支持分页和筛选，仅返回当前用户的作业",
        "operationId": "get_exercises_api_v1_ai_exercise_list_get",
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 1,
              "title": "Page"
            }
          },
          {
            "name": "page_size",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 10,
              "title": "Page Size"
            }
          },
          {
            "name": "subject",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Subject"
            }
          },
          {
            "name": "difficulty",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Difficulty"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {

                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/ai/exercise/{exercise_id}": {
      "get": {
        "tags": [
          "AI 智能服务模块"
        ],
        "summary": "Get Exercise Detail",
        "description": "获取作业详情\n\n返回完整的作业信息（包括所有题目）",
        "operationId": "get_exercise_detail_api_v1_ai_exercise__exercise_id__get",
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "parameters": [
          {
            "name": "exercise_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Exercise Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {

                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "AI 智能服务模块"
        ],
        "summary": "Delete Exercise Api",
        "description": "删除作业（软删除）\n\n仅能删除自己创建的作业",
        "operationId": "delete_exercise_api_api_v1_ai_exercise__exercise_id__delete",
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "parameters": [
          {
            "name": "exercise_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Exercise Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {

                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": [
          "AI 智能服务模块"
        ],
        "summary": "Update Exercise Api",
        "description": "更新作业信息\n\n可更新标题、用途、难度、时长和题目内容",
        "operationId": "update_exercise_api_api_v1_ai_exercise__exercise_id__put",
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "parameters": [
          {
            "name": "exercise_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Exercise Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ExerciseUpdateRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {

                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/ai/lps/analyze": {
      "get": {
        "tags": [
          "AI 智能服务模块"
        ],
        "summary": "Lps Analyze",
        "operationId": "lps_analyze_api_v1_ai_lps_analyze_get",
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "parameters": [
          {
            "name": "msg",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Msg"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {

                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/ai/lps/test": {
      "post": {
        "tags": [
          "AI 智能服务模块"
        ],
        "summary": "Lps Analyze",
        "operationId": "lps_analyze_api_v1_ai_lps_test_post",
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "parameters": [
          {
            "name": "msg",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Msg"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {

                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/learning_profile/": {
      "get": {
        "tags": [
          "Learning Profile 学习档案模块"
        ],
        "summary": "List Profiles",
        "description": "获取当前用户的所有学习档案",
        "operationId": "list_profiles_api_v1_learning_profile__get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "items": {
                    "$ref": "#/components/schemas/LearningProfileOut"
                  },
                  "type": "array",
                  "title": "Response List Profiles Api V1 Learning Profile  Get"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      },
      "post": {
        "tags": [
          "Learning Profile 学习档案模块"
        ],
        "summary": "Create Profile",
        "description": "创建学习档案",
        "operationId": "create_profile_api_v1_learning_profile__post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/LearningProfileCreate"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/LearningProfileOut"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/api/v1/learning_profile/{profile_id}": {
      "get": {
        "tags": [
          "Learning Profile 学习档案模块"
        ],
        "summary": "Get Profile",
        "description": "根据ID获取学习档案",
        "operationId": "get_profile_api_v1_learning_profile__profile_id__get",
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "parameters": [
          {
            "name": "profile_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Profile Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/LearningProfileOut"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": [
          "Learning Profile 学习档案模块"
        ],
        "summary": "Update Profile",
        "description": "更新学习档案",
        "operationId": "update_profile_api_v1_learning_profile__profile_id__put",
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "parameters": [
          {
            "name": "profile_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Profile Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/LearningProfileCreate"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/LearningProfileOut"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "Learning Profile 学习档案模块"
        ],
        "summary": "Delete Profile",
        "description": "删除学习档案",
        "operationId": "delete_profile_api_v1_learning_profile__profile_id__delete",
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "parameters": [
          {
            "name": "profile_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Profile Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {

                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/media/image/generate": {
      "post": {
        "tags": [
          "Media 媒体生成模块"
        ],
        "summary": "Generate Image",
        "description": "生成图像（同步）\n\n流程：用户输入 → LLM 优化提示词（可选）→ 调用智谱 API → 返回图像 URL",
        "operationId": "generate_image_api_v1_media_image_generate_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ImageGenerateRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ImageGenerateResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/api/v1/media/video/generate": {
      "post": {
        "tags": [
          "Media 媒体生成模块"
        ],
        "summary": "Generate Video",
        "description": "发起视频生成任务（异步）\n\n流程：用户输入 → LLM 优化提示词（可选）→ 提交生成任务 → 返回任务 ID\n通过 /video/status/{task_id} 查询生成进度",
        "operationId": "generate_video_api_v1_media_video_generate_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/VideoGenerateRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/VideoGenerateResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/api/v1/media/video/status/{task_id}": {
      "get": {
        "tags": [
          "Media 媒体生成模块"
        ],
        "summary": "Query Video Status",
        "description": "查询视频生成任务状态\n\n返回任务状态，成功时包含视频 URL 和封面图 URL",
        "operationId": "query_video_status_api_v1_media_video_status__task_id__get",
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ],
        "parameters": [
          {
            "name": "task_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "视频生成任务 ID",
              "title": "Task Id"
            },
            "description": "视频生成任务 ID"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/VideoStatusResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/status/ping": {
      "get": {
        "summary": "Ping",
        "operationId": "ping_status_ping_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {

                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "AvatarResponse": {
        "properties": {
          "avatar_url": {
            "type": "string",
            "title": "Avatar Url",
            "description": "头像 URL"
          },
          "message": {
            "type": "string",
            "title": "Message",
            "default": "头像上传成功"
          }
        },
        "type": "object",
        "required": [
          "avatar_url"
        ],
        "title": "AvatarResponse",
        "description": "头像上传响应"
      },
      "Body_login_api_v1_auth_login_post": {
        "properties": {
          "grant_type": {
            "anyOf": [
              {
                "type": "string",
                "pattern": "^password$"
              },
              {
                "type": "null"
              }
            ],
            "title": "Grant Type"
          },
          "username": {
            "type": "string",
            "title": "Username"
          },
          "password": {
            "type": "string",
            "format": "password",
            "title": "Password"
          },
          "scope": {
            "type": "string",
            "title": "Scope",
            "default": ""
          },
          "client_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Client Id"
          },
          "client_secret": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "format": "password",
            "title": "Client Secret"
          }
        },
        "type": "object",
        "required": [
          "username",
          "password"
        ],
        "title": "Body_login_api_v1_auth_login_post"
      },
      "Body_upload_avatar_api_v1_auth_avatar_post": {
        "properties": {
          "file": {
            "type": "string",
            "format": "binary",
            "title": "File"
          }
        },
        "type": "object",
        "required": [
          "file"
        ],
        "title": "Body_upload_avatar_api_v1_auth_avatar_post"
      },
      "ClarifyChatIn": {
        "properties": {
          "session_id": {
            "type": "string",
            "title": "Session Id"
          },
          "message": {
            "type": "string",
            "title": "Message"
          }
        },
        "type": "object",
        "required": [
          "session_id",
          "message"
        ],
        "title": "ClarifyChatIn"
      },
      "ClarifyConfirmIn": {
        "properties": {
          "session_id": {
            "type": "string",
            "title": "Session Id"
          },
          "confirm_md_final": {
            "type": "string",
            "title": "Confirm Md Final"
          }
        },
        "type": "object",
        "required": [
          "session_id",
          "confirm_md_final"
        ],
        "title": "ClarifyConfirmIn"
      },
      "CommonMistake": {
        "properties": {
          "knowledge_point": {
            "type": "string",
            "title": "Knowledge Point",
            "description": "对应知识点"
          },
          "description": {
            "type": "string",
            "title": "Description",
            "description": "错误或问题描述"
          },
          "frequency": {
            "type": "string",
            "title": "Frequency",
            "description": "出现频率"
          }
        },
        "type": "object",
        "required": [
          "knowledge_point",
          "description",
          "frequency"
        ],
        "title": "CommonMistake"
      },
      "ExerciseUpdateRequest": {
        "properties": {
          "title": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Title",
            "description": "作业标题"
          },
          "purpose": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Purpose",
            "description": "作业用途"
          },
          "overall_difficulty": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Overall Difficulty",
            "description": "整体难度"
          },
          "suggested_duration_minutes": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Suggested Duration Minutes",
            "description": "建议时长"
          },
          "exercises": {
            "anyOf": [
              {
                "items": {
                  "additionalProperties": true,
                  "type": "object"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Exercises",
            "description": "题目列表"
          }
        },
        "type": "object",
        "title": "ExerciseUpdateRequest",
        "description": "作业更新请求"
      },
      "GenerateIn": {
        "properties": {
          "session_id": {
            "type": "string",
            "title": "Session Id"
          }
        },
        "type": "object",
        "required": [
          "session_id"
        ],
        "title": "GenerateIn"
      },
      "HTTPValidationError": {
        "properties": {
          "detail": {
            "items": {
              "$ref": "#/components/schemas/ValidationError"
            },
            "type": "array",
            "title": "Detail"
          }
        },
        "type": "object",
        "title": "HTTPValidationError"
      },
      "ImageGenerateRequest": {
        "properties": {
          "prompt": {
            "type": "string",
            "maxLength": 1000,
            "minLength": 1,
            "title": "Prompt",
            "description": "图像描述"
          },
          "size": {
            "type": "string",
            "title": "Size",
            "description": "图像尺寸",
            "default": "1024x1024"
          },
          "quality": {
            "type": "string",
            "enum": [
              "standard",
              "hd"
            ],
            "title": "Quality",
            "description": "图像质量",
            "default": "standard"
          },
          "optimize_prompt": {
            "type": "boolean",
            "title": "Optimize Prompt",
            "description": "是否使用 LLM 优化提示词",
            "default": true
          },
          "watermark_enabled": {
            "type": "boolean",
            "title": "Watermark Enabled",
            "description": "是否添加水印",
            "default": false
          }
        },
        "type": "object",
        "required": [
          "prompt"
        ],
        "title": "ImageGenerateRequest",
        "description": "图像生成请求"
      },
      "ImageGenerateResponse": {
        "properties": {
          "original_prompt": {
            "type": "string",
            "title": "Original Prompt",
            "description": "原始提示词"
          },
          "optimized_prompt": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Optimized Prompt",
            "description": "优化后的提示词"
          },
          "image_url": {
            "type": "string",
            "title": "Image Url",
            "description": "生成的图像 URL"
          },
          "created": {
            "type": "integer",
            "title": "Created",
            "description": "创建时间戳"
          }
        },
        "type": "object",
        "required": [
          "original_prompt",
          "image_url",
          "created"
        ],
        "title": "ImageGenerateResponse",
        "description": "图像生成响应"
      },
      "LearningBehavior": {
        "properties": {
          "calculation_skill": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Calculation Skill",
            "description": "计算能力"
          },
          "conceptual_understanding": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Conceptual Understanding",
            "description": "概念理解能力"
          },
          "class_participation": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Class Participation",
            "description": "课堂参与度"
          },
          "homework_completion": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Homework Completion",
            "description": "作业完成情况"
          }
        },
        "type": "object",
        "title": "LearningBehavior"
      },
      "LearningProfile": {
        "properties": {
          "scope": {
            "$ref": "#/components/schemas/LearningScope"
          },
          "overall_learning_level": {
            "$ref": "#/components/schemas/OverallLearningLevel"
          },
          "prior_knowledge": {
            "$ref": "#/components/schemas/PriorKnowledge",
            "description": "已具备的前置知识"
          },
          "common_mistakes": {
            "items": {
              "$ref": "#/components/schemas/CommonMistake"
            },
            "type": "array",
            "title": "Common Mistakes",
            "description": "典型问题与易错点"
          },
          "learning_behavior": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/LearningBehavior"
              },
              {
                "type": "null"
              }
            ],
            "description": "学习行为特征"
          },
          "teaching_suggestions": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Teaching Suggestions",
            "description": "教师给出的教学建议"
          },
          "remarks": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Remarks",
            "description": "补充说明（自由文本）"
          },
          "created_by": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Created By",
            "description": "学情来源（teacher / system / ai）",
            "default": "teacher"
          }
        },
        "type": "object",
        "required": [
          "scope",
          "overall_learning_level"
        ],
        "title": "LearningProfile",
        "description": "班级学情分析（Learning Profile）\n用于教案生成、作业生成、教学策略优化"
      },
      "LearningProfileCreate": {
        "properties": {
          "title": {
            "type": "string",
            "title": "Title"
          },
          "profile": {
            "$ref": "#/components/schemas/LearningProfile"
          }
        },
        "type": "object",
        "required": [
          "title",
          "profile"
        ],
        "title": "LearningProfileCreate"
      },
      "LearningProfileOut": {
        "properties": {
          "id": {
            "type": "integer",
            "title": "Id"
          },
          "title": {
            "type": "string",
            "title": "Title"
          },
          "subject": {
            "type": "string",
            "title": "Subject"
          },
          "grade": {
            "type": "string",
            "title": "Grade"
          },
          "related_chapter": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Related Chapter"
          },
          "profile": {
            "$ref": "#/components/schemas/LearningProfile"
          }
        },
        "type": "object",
        "required": [
          "id",
          "title",
          "subject",
          "grade",
          "related_chapter",
          "profile"
        ],
        "title": "LearningProfileOut"
      },
      "LearningScope": {
        "properties": {
          "subject": {
            "type": "string",
            "title": "Subject",
            "description": "学科"
          },
          "grade": {
            "type": "string",
            "title": "Grade",
            "description": "年级"
          },
          "class_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Class Name",
            "description": "班级名称"
          },
          "semester": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Semester",
            "description": "学期"
          },
          "related_chapter": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Related Chapter",
            "description": "关联章节或知识主题"
          },
          "data_time_range": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Data Time Range",
            "description": "学情数据覆盖时间范围"
          }
        },
        "type": "object",
        "required": [
          "subject",
          "grade"
        ],
        "title": "LearningScope"
      },
      "LessonClarifyChatIn": {
        "properties": {
          "session_id": {
            "type": "string",
            "title": "Session Id",
            "description": "会话 ID"
          },
          "message": {
            "type": "string",
            "title": "Message",
            "description": "用户消息"
          }
        },
        "type": "object",
        "required": [
          "session_id",
          "message"
        ],
        "title": "LessonClarifyChatIn",
        "description": "教案澄清对话请求"
      },
      "LessonClarifySchema": {
        "properties": {
          "subject": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Subject",
            "description": "学科"
          },
          "grade": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Grade",
            "description": "年级"
          },
          "lesson_title": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Lesson Title",
            "description": "课题名称"
          },
          "lesson_type": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Lesson Type",
            "description": "课程类型，如 新授 / 复习 / 实验 / 综合"
          },
          "class_duration": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Class Duration",
            "description": "单课时长度（分钟）"
          },
          "lesson_count": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Lesson Count",
            "description": "课时数"
          },
          "teaching_goal_focus": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Teaching Goal Focus",
            "description": "教学侧重点，如 知识 / 能力 / 素养 / 应试"
          },
          "difficulty_level": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Difficulty Level",
            "description": "难度水平，如 基础 / 中等 / 提高"
          },
          "exam_related": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Exam Related",
            "description": "是否与考试相关"
          },
          "curriculum_standard": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Curriculum Standard",
            "description": "对应课程标准"
          },
          "constraints": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Constraints",
            "description": "特殊约束条件"
          },
          "notes": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Notes",
            "description": "教师补充说明"
          }
        },
        "type": "object",
        "title": "LessonClarifySchema"
      },
      "LessonClarifyUpdateIn": {
        "properties": {
          "session_id": {
            "type": "string",
            "title": "Session Id"
          },
          "clarify_data": {
            "additionalProperties": true,
            "type": "object",
            "title": "Clarify Data",
            "description": "要更新的澄清数据"
          }
        },
        "type": "object",
        "required": [
          "session_id",
          "clarify_data"
        ],
        "title": "LessonClarifyUpdateIn",
        "description": "教案澄清数据直接更新请求"
      },
      "LessonCreateIn": {
        "properties": {
          "template_id": {
            "type": "string",
            "title": "Template Id",
            "description": "模板 ID",
            "default": "default-v1"
          },
          "subject": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Subject"
          },
          "grade": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Grade"
          },
          "lesson_title": {
            "type": "string",
            "title": "Lesson Title",
            "description": "课题名称"
          },
          "lesson_type": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Lesson Type"
          },
          "class_duration": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Class Duration",
            "default": 45
          },
          "lesson_count": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Lesson Count",
            "default": 1
          },
          "content": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Content"
          },
          "notes": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Notes"
          }
        },
        "type": "object",
        "required": [
          "lesson_title"
        ],
        "title": "LessonCreateIn",
        "description": "创建教案请求"
      },
      "LessonGenerateIn": {
        "properties": {
          "session_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Session Id",
            "description": "会话 ID（从会话获取 clarify）"
          },
          "clarify": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/LessonClarifySchema"
              },
              {
                "type": "null"
              }
            ],
            "description": "直接提供的澄清数据"
          },
          "template_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Template Id",
            "description": "模板 ID，默认使用标准模板"
          },
          "locked_sections": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Locked Sections",
            "description": "锁定的章节 key 列表",
            "default": []
          }
        },
        "type": "object",
        "title": "LessonGenerateIn",
        "description": "触发教案生成请求"
      },
      "LessonPatchIn": {
        "properties": {
          "subject": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Subject"
          },
          "grade": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Grade"
          },
          "lesson_title": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Lesson Title"
          },
          "lesson_type": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Lesson Type"
          },
          "content": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Content"
          },
          "locked_sections": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Locked Sections"
          },
          "notes": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Notes"
          }
        },
        "type": "object",
        "title": "LessonPatchIn",
        "description": "局部更新教案请求"
      },
      "LessonSectionUpdateIn": {
        "properties": {
          "section_key": {
            "type": "string",
            "title": "Section Key",
            "description": "章节 key，如 objectives, teaching_flow.main"
          },
          "content": {
            "title": "Content",
            "description": "章节内容"
          },
          "lock": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Lock",
            "description": "是否锁定该章节"
          }
        },
        "type": "object",
        "required": [
          "section_key",
          "content"
        ],
        "title": "LessonSectionUpdateIn",
        "description": "更新单个章节内容"
      },
      "LessonUpdateIn": {
        "properties": {
          "subject": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Subject"
          },
          "grade": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Grade"
          },
          "lesson_title": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Lesson Title"
          },
          "lesson_type": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Lesson Type"
          },
          "class_duration": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Class Duration"
          },
          "lesson_count": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Lesson Count"
          },
          "content": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Content"
          },
          "locked_sections": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Locked Sections"
          },
          "notes": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Notes"
          }
        },
        "type": "object",
        "title": "LessonUpdateIn",
        "description": "更新教案请求（完整更新）"
      },
      "OverallLearningLevel": {
        "properties": {
          "overall_level": {
            "type": "string",
            "title": "Overall Level",
            "description": "整体学习水平"
          },
          "strong_ratio": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Strong Ratio",
            "description": "学习能力较强学生比例"
          },
          "average_ratio": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Average Ratio",
            "description": "中等学生比例"
          },
          "weak_ratio": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Weak Ratio",
            "description": "学习能力偏弱学生比例"
          }
        },
        "type": "object",
        "required": [
          "overall_level"
        ],
        "title": "OverallLearningLevel"
      },
      "PasswordUpdate": {
        "properties": {
          "old_password": {
            "type": "string",
            "minLength": 6,
            "title": "Old Password",
            "description": "旧密码"
          },
          "new_password": {
            "type": "string",
            "maxLength": 50,
            "minLength": 6,
            "title": "New Password",
            "description": "新密码"
          }
        },
        "type": "object",
        "required": [
          "old_password",
          "new_password"
        ],
        "title": "PasswordUpdate",
        "description": "密码修改请求"
      },
      "PriorKnowledge": {
        "properties": {
          "mastered_knowledge_points": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Mastered Knowledge Points",
            "description": "已掌握的知识点"
          },
          "partially_mastered_knowledge_points": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Partially Mastered Knowledge Points",
            "description": "部分掌握的知识点"
          }
        },
        "type": "object",
        "title": "PriorKnowledge"
      },
      "UserCreate": {
        "properties": {
          "username": {
            "type": "string",
            "maxLength": 50,
            "minLength": 3,
            "title": "Username",
            "description": "用户名（3-50个字符）"
          },
          "email": {
            "type": "string",
            "format": "email",
            "title": "Email",
            "description": "邮箱"
          },
          "full_name": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 100
              },
              {
                "type": "null"
              }
            ],
            "title": "Full Name",
            "description": "真实姓名"
          },
          "password": {
            "type": "string",
            "maxLength": 50,
            "minLength": 6,
            "title": "Password",
            "description": "密码（6-50个字符）"
          }
        },
        "type": "object",
        "required": [
          "username",
          "email",
          "password"
        ],
        "title": "UserCreate",
        "description": "用户创建模型（注册用）"
      },
      "UserProfileResponse": {
        "properties": {
          "id": {
            "type": "integer",
            "title": "Id"
          },
          "username": {
            "type": "string",
            "title": "Username"
          },
          "email": {
            "type": "string",
            "title": "Email"
          },
          "full_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Full Name"
          },
          "role": {
            "type": "string",
            "title": "Role"
          },
          "avatar_url": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Avatar Url"
          },
          "phone": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Phone"
          },
          "subject": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Subject"
          },
          "teaching_style": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Teaching Style"
          },
          "personal_desc": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Personal Desc"
          },
          "years_of_experience": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Years Of Experience"
          },
          "school": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "School"
          },
          "title": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Title"
          },
          "is_active": {
            "type": "boolean",
            "title": "Is Active"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "title": "Updated At"
          }
        },
        "type": "object",
        "required": [
          "id",
          "username",
          "email",
          "role",
          "is_active",
          "created_at",
          "updated_at"
        ],
        "title": "UserProfileResponse",
        "description": "用户完整档案响应"
      },
      "UserProfileUpdate": {
        "properties": {
          "full_name": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 100
              },
              {
                "type": "null"
              }
            ],
            "title": "Full Name",
            "description": "真实姓名"
          },
          "phone": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 20
              },
              {
                "type": "null"
              }
            ],
            "title": "Phone",
            "description": "手机号"
          },
          "subject": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 50
              },
              {
                "type": "null"
              }
            ],
            "title": "Subject",
            "description": "教授学科"
          },
          "teaching_style": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Teaching Style",
            "description": "教学风格"
          },
          "personal_desc": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Personal Desc",
            "description": "个人简介"
          },
          "years_of_experience": {
            "anyOf": [
              {
                "type": "integer",
                "maximum": 50,
                "minimum": 0
              },
              {
                "type": "null"
              }
            ],
            "title": "Years Of Experience",
            "description": "教龄"
          },
          "school": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 100
              },
              {
                "type": "null"
              }
            ],
            "title": "School",
            "description": "所在学校"
          },
          "title": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 50
              },
              {
                "type": "null"
              }
            ],
            "title": "Title",
            "description": "职称"
          }
        },
        "type": "object",
        "title": "UserProfileUpdate",
        "description": "用户档案更新请求"
      },
      "UserResponse": {
        "properties": {
          "username": {
            "type": "string",
            "maxLength": 50,
            "minLength": 3,
            "title": "Username",
            "description": "用户名（3-50个字符）"
          },
          "email": {
            "type": "string",
            "format": "email",
            "title": "Email",
            "description": "邮箱"
          },
          "full_name": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 100
              },
              {
                "type": "null"
              }
            ],
            "title": "Full Name",
            "description": "真实姓名"
          },
          "id": {
            "type": "integer",
            "title": "Id"
          },
          "role": {
            "type": "string",
            "title": "Role"
          },
          "is_active": {
            "type": "boolean",
            "title": "Is Active"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "title": "Updated At"
          }
        },
        "type": "object",
        "required": [
          "username",
          "email",
          "id",
          "role",
          "is_active",
          "created_at",
          "updated_at"
        ],
        "title": "UserResponse",
        "description": "用户响应模型"
      },
      "ValidationError": {
        "properties": {
          "loc": {
            "items": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "integer"
                }
              ]
            },
            "type": "array",
            "title": "Location"
          },
          "msg": {
            "type": "string",
            "title": "Message"
          },
          "type": {
            "type": "string",
            "title": "Error Type"
          }
        },
        "type": "object",
        "required": [
          "loc",
          "msg",
          "type"
        ],
        "title": "ValidationError"
      },
      "VideoGenerateRequest": {
        "properties": {
          "prompt": {
            "type": "string",
            "maxLength": 500,
            "minLength": 1,
            "title": "Prompt",
            "description": "视频描述"
          },
          "size": {
            "type": "string",
            "title": "Size",
            "description": "视频尺寸",
            "default": "1024x1024"
          },
          "fps": {
            "type": "integer",
            "maximum": 60,
            "minimum": 15,
            "title": "Fps",
            "description": "帧率",
            "default": 30
          },
          "quality": {
            "type": "string",
            "enum": [
              "speed",
              "quality"
            ],
            "title": "Quality",
            "description": "生成质量",
            "default": "speed"
          },
          "with_audio": {
            "type": "boolean",
            "title": "With Audio",
            "description": "是否包含音频",
            "default": true
          },
          "optimize_prompt": {
            "type": "boolean",
            "title": "Optimize Prompt",
            "description": "是否使用 LLM 优化提示词",
            "default": true
          },
          "watermark_enabled": {
            "type": "boolean",
            "title": "Watermark Enabled",
            "description": "是否添加水印",
            "default": false
          }
        },
        "type": "object",
        "required": [
          "prompt"
        ],
        "title": "VideoGenerateRequest",
        "description": "视频生成请求"
      },
      "VideoGenerateResponse": {
        "properties": {
          "task_id": {
            "type": "string",
            "title": "Task Id",
            "description": "任务 ID"
          },
          "original_prompt": {
            "type": "string",
            "title": "Original Prompt",
            "description": "原始提示词"
          },
          "optimized_prompt": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Optimized Prompt",
            "description": "优化后的提示词"
          },
          "task_status": {
            "type": "string",
            "title": "Task Status",
            "description": "任务状态"
          },
          "message": {
            "type": "string",
            "title": "Message",
            "description": "提示信息",
            "default": "视频生成任务已提交，请通过任务 ID 查询进度"
          }
        },
        "type": "object",
        "required": [
          "task_id",
          "original_prompt",
          "task_status"
        ],
        "title": "VideoGenerateResponse",
        "description": "视频生成响应"
      },
      "VideoStatusResponse": {
        "properties": {
          "task_id": {
            "type": "string",
            "title": "Task Id",
            "description": "任务 ID"
          },
          "task_status": {
            "type": "string",
            "title": "Task Status",
            "description": "任务状态: PROCESSING, SUCCESS, FAIL"
          },
          "video_url": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Video Url",
            "description": "视频 URL（成功时返回）"
          },
          "cover_image_url": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Cover Image Url",
            "description": "封面图 URL（成功时返回）"
          },
          "error": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Error",
            "description": "错误信息（失败时返回）"
          }
        },
        "type": "object",
        "required": [
          "task_id",
          "task_status"
        ],
        "title": "VideoStatusResponse",
        "description": "视频状态查询响应"
      }
    },
    "securitySchemes": {
      "OAuth2PasswordBearer": {
        "type": "oauth2",
        "flows": {
          "password": {
            "scopes": {

            },
            "tokenUrl": "/api/v1/auth/login"
          }
        }
      }
    }
  }
}